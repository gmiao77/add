<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>广告架构策略</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <header class="mb-8">
            <h1 class="text-2xl font-bold text-gray-800 text-center">广告架构策略</h1>
        </header>

        <main class="bg-white rounded-lg shadow-md p-6">
            <!-- 策略选择器 -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">选择策略</label>
                <select id="strategySelector" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                    <option value="">请选择策略</option>
                    <option value="strategy1">策略1 - Amazon关键词广告批量创建</option>
                    <option value="strategy2">策略2 - 预留策略</option>
                </select>
            </div>

            <!-- 策略内容容器（初始为空） -->
            <div id="strategyContent" class="min-h-[500px] border border-gray-200 rounded-lg p-4">
                <div class="flex items-center justify-center h-[500px] text-gray-500">
                    <p>请从上方选择策略</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        // 策略映射表：策略标识 -> 对应的模块文件
        const strategyMap = {
            strategy1: 'strategy1.js',
            strategy2: 'strategies/strategy2.js'
        };

        // 当前加载的策略模块
        let currentModule = null;

        // 策略选择事件
        document.getElementById('strategySelector').addEventListener('change', async (e) => {
            const strategyId = e.target.value;
            const container = document.getElementById('strategyContent');

            // 清空容器
            container.innerHTML = '<div class="flex items-center justify-center h-[500px] text-gray-500"><p>加载中...</p></div>';

            if (!strategyId) {
                // 未选择策略
                container.innerHTML = '<div class="flex items-center justify-center h-[500px] text-gray-500"><p>请从上方选择策略</p></div>';
                currentModule = null;
                return;
            }

            try {
                // 移除已加载的策略脚本
                const oldScript = document.getElementById('strategyScript');
                if (oldScript) oldScript.remove();

                // 加载新策略模块
                const script = document.createElement('script');
                script.id = 'strategyScript';
                script.src = strategyMap[strategyId];
                script.type = 'module'; // 使用ES6模块

                // 等待脚本加载并执行
                await new Promise((resolve, reject) => {
                    script.onload = resolve;
                    script.onerror = () => reject(new Error('策略加载失败'));
                    document.head.appendChild(script);
                });

                // 调用模块的初始化方法
                if (window[strategyId] && typeof window[strategyId].init === 'function') {
                    currentModule = window[strategyId];
                    currentModule.init(container); // 将容器传递给模块
                } else {
                    throw new Error('策略模块格式错误');
                }
            } catch (error) {
                container.innerHTML = `<div class="flex items-center justify-center h-[500px] text-red-500"><p>加载失败: ${error.message}</p></div>`;
                currentModule = null;
            }
        });
    </script>
</body>
</html>

